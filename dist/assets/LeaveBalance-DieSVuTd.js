import{r as i,j as e,C as l,P as y,d as h,L as o,Q as g}from"./index-uPpi8n1S.js";import{l as p}from"./leaveService-CJtUEa2x.js";import{A as t}from"./alert-circle-D8bfA7k2.js";const u=()=>{const[d,c]=i.useState([]),[x,n]=i.useState(!0),[m]=i.useState(new Date().getFullYear());i.useEffect(()=>{(async()=>{try{const s=await p.getMyLeaveBalances();c(s)}catch(s){console.error("Error fetching leave balances:",s),g.error("Failed to load leave balances")}finally{n(!1)}})()},[]);const r=d.reduce((a,s)=>(a.total+=s.totalDays,a.used+=s.usedDays,a.pending+=s.pendingDays,a.remaining+=s.remainingDays,a),{total:0,used:0,pending:0,remaining:0});return x?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 animate-bounce",style:{animationDelay:"300ms"}})]})}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Leave Balance"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:["View your current leave balances for ",m]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Leave Days"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(l,{size:20,className:"text-primary-500 mr-2"}),e.jsx("span",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.total})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Used Days"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(y,{size:20,className:"text-error-500 mr-2"}),e.jsx("span",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.used})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending Days"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(h,{size:20,className:"text-accent-500 mr-2"}),e.jsx("span",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.pending})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Remaining Days"}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(l,{size:20,className:"text-success-500 mr-2"}),e.jsx("span",{className:"text-2xl font-semibold text-gray-900 dark:text-white",children:r.remaining})]})]})})]}),e.jsxs("div",{className:"card mb-6",children:[e.jsxs("div",{className:"card-header flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Detailed Balances"}),e.jsx(o,{to:"/leave/apply",className:"btn btn-primary btn-sm",children:"Apply for Leave"})]}),d.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Leave Type"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Total"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Used"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Pending"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Remaining"}),e.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Usage"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(a=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-750 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:a.leaveTypeName})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-gray-800 dark:text-gray-200",children:a.totalDays}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center text-gray-800 dark:text-gray-200",children:a.usedDays}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:a.pendingDays>0?e.jsx("span",{className:"text-accent-600 dark:text-accent-400",children:a.pendingDays}):e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"0"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center font-medium",children:a.remainingDays>0?e.jsx("span",{className:"text-success-600 dark:text-success-400",children:a.remainingDays}):e.jsx("span",{className:"text-error-600 dark:text-error-400",children:"0"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${a.remainingDays===0?"bg-error-500":a.remainingDays<a.totalDays*.25?"bg-warning-500":"bg-success-500"}`,style:{width:`${a.usedDays/a.totalDays*100}%`}})}),e.jsxs("span",{className:"ml-2 text-xs text-gray-600 dark:text-gray-400",children:[Math.round(a.usedDays/a.totalDays*100),"%"]})]})})]},a.id))})]})}):e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:e.jsx(l,{size:24,className:"text-gray-500 dark:text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:"No leave balances found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please contact your administrator if you believe this is an error"})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Leave Policy Information"})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-1 text-primary-500",children:e.jsx(t,{size:16})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Annual Leave"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Full-time employees are entitled to 20 days of annual leave per year. Leave is accrued monthly."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-1 text-primary-500",children:e.jsx(t,{size:16})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Sick Leave"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Employees receive 10 days of paid sick leave annually. A medical certificate is required for absences of 3 or more consecutive days."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-1 text-primary-500",children:e.jsx(t,{size:16})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Personal Leave"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"5 days of personal leave is provided each year for personal matters, emergencies, or other obligations."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-1 text-primary-500",children:e.jsx(t,{size:16})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Carry Forward Policy"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Up to 5 days of unused annual leave can be carried forward to the next year. Carried forward leave must be used within the first 6 months."})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"mt-1 text-primary-500",children:e.jsx(t,{size:16})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Request Policy"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Leave requests should be submitted at least 3 working days in advance for proper planning."})]})]})]})})]})]})};export{u as default};
