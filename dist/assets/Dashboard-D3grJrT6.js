import{c as j,u as S,r as l,j as e,L as c,C as z,d as A}from"./index-uPpi8n1S.js";import{l as n}from"./leaveService-CJtUEa2x.js";import{C as E,A as F,a as M,L as q,B as T,p as P,b as O,c as V,d as x,F as H,e as W,D as y,f as _}from"./index-BZWX0gRg.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=j("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p=j("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);E.register(F,M,q,T,P,O,V);const X=()=>{var h,g;const{user:t}=S(),[v,u]=l.useState([]),[i,N]=l.useState([]),[b,k]=l.useState(!0),[r,f]=l.useState({approved:0,pending:0,rejected:0,total:0,byType:[],byMonth:[]});l.useEffect(()=>{(async()=>{try{const[s,d,R]=await Promise.all([n.getMyLeaveRequests(),n.getMyLeaveBalances(),n.getLeaveStatistics(t==null?void 0:t.id)]);u(s),N(d),f(R)}catch(s){console.error("Error fetching dashboard data:",s)}finally{k(!1)}})()},[t==null?void 0:t.id]);const w={labels:["Used","Pending","Remaining"],datasets:[{data:[i.reduce((a,s)=>a+s.usedDays,0),i.reduce((a,s)=>a+s.pendingDays,0),i.reduce((a,s)=>a+s.remainingDays,0)],backgroundColor:["#3B82F6","#F59E0B","#10B981"],borderWidth:0}]},D={labels:["Approved","Pending","Rejected"],datasets:[{data:[r.approved,r.pending,r.rejected],backgroundColor:["#10B981","#F59E0B","#EF4444"],borderWidth:0}]},L={labels:((h=r.byMonth)==null?void 0:h.map(a=>a.month))||[],datasets:[{label:"Leave Requests",data:((g=r.byMonth)==null?void 0:g.map(a=>a.count))||[],backgroundColor:"#3B82F6",borderRadius:4}]},m={responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0,pointStyle:"circle"}}}},B={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},title:{display:!0,text:"Monthly Leave Distribution"}},scales:{y:{beginAtZero:!0,ticks:{precision:0}}}},o=[...v].sort((a,s)=>new Date(s.appliedOn).getTime()-new Date(a.appliedOn).getTime()).slice(0,5),C=({status:a})=>{let s="",d="";switch(a){case"approved":s="bg-success-100 dark:bg-success-900/30",d="text-success-800 dark:text-success-300";break;case"pending":s="bg-accent-100 dark:bg-accent-900/30",d="text-accent-800 dark:text-accent-300";break;case"rejected":s="bg-error-100 dark:bg-error-900/30",d="text-error-800 dark:text-error-300";break;default:s="bg-gray-100 dark:bg-gray-800",d="text-gray-800 dark:text-gray-300"}return e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s} ${d} capitalize`,children:a})};return b?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary-600 dark:bg-primary-400 animate-bounce",style:{animationDelay:"300ms"}})]})}):e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:["Welcome back, ",t==null?void 0:t.name]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Here's an overview of your leave status and recent requests"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs(c,{to:"/leave/apply",className:"bg-primary-50 dark:bg-primary-900/20 border border-primary-200 dark:border-primary-800 rounded-lg p-4 flex items-center justify-between transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary-100 dark:bg-primary-800 p-3 rounded-lg text-primary-600 dark:text-primary-400 mr-3",children:e.jsx(z,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Apply for Leave"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Request time off"})]})]}),e.jsx(x,{size:18,className:"text-gray-400"})]}),e.jsxs(c,{to:"/leave/history",className:"bg-secondary-50 dark:bg-secondary-900/20 border border-secondary-200 dark:border-secondary-800 rounded-lg p-4 flex items-center justify-between transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-secondary-100 dark:bg-secondary-800 p-3 rounded-lg text-secondary-600 dark:text-secondary-400 mr-3",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Leave History"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View all requests"})]})]}),e.jsx(x,{size:18,className:"text-gray-400"})]}),e.jsxs(c,{to:"/leave/balance",className:"bg-accent-50 dark:bg-accent-900/20 border border-accent-200 dark:border-accent-800 rounded-lg p-4 flex items-center justify-between transition-all hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-accent-100 dark:bg-accent-800 p-3 rounded-lg text-accent-600 dark:text-accent-400 mr-3",children:e.jsx(A,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Leave Balance"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Check your balance"})]})]}),e.jsx(x,{size:18,className:"text-gray-400"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-success-100 dark:bg-success-900/30 p-3 rounded-lg text-success-600 dark:text-success-400 mr-3",children:e.jsx(p,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Approved"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.approved})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-accent-100 dark:bg-accent-900/30 p-3 rounded-lg text-accent-600 dark:text-accent-400 mr-3",children:e.jsx(H,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.pending})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-error-100 dark:bg-error-900/30 p-3 rounded-lg text-error-600 dark:text-error-400 mr-3",children:e.jsx(W,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rejected"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.rejected})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-primary-100 dark:bg-primary-900/30 p-3 rounded-lg text-primary-600 dark:text-primary-400 mr-3",children:e.jsx($,{size:20})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.total})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Leave Balance"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"h-64",children:e.jsx(y,{data:w,options:m})})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Leave Status"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"h-64",children:e.jsx(y,{data:D,options:m})})})]}),e.jsxs("div",{className:"card md:col-span-2",children:[e.jsx("div",{className:"card-header",children:e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Monthly Distribution"})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"h-64",children:e.jsx(_,{data:L,options:B})})})]})]}),e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"card-header flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Recent Requests"}),e.jsx(c,{to:"/leave/history",className:"text-sm text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"View all"})]}),e.jsx("div",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.length>0?o.map(a=>e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:a.leaveType}),e.jsx(C,{status:a.status})]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-600 dark:text-gray-400",children:[new Date(a.startDate).toLocaleDateString()," - ",new Date(a.endDate).toLocaleDateString()]}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-500",children:["Applied on ",new Date(a.appliedOn).toLocaleDateString()]})]},a.id)):e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No recent leave requests"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Leave Balances"}),e.jsx(c,{to:"/leave/balance",className:"text-sm text-primary-600 hover:text-primary-500 dark:text-primary-400 dark:hover:text-primary-300",children:"View details"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:i.length>0?i.map(a=>e.jsxs("div",{className:"card p-4",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:a.leaveTypeName}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:a.year})]}),e.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.remainingDays}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400 ml-1",children:"remaining"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total: "}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.totalDays})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Used: "}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a.usedDays})]}),a.pendingDays>0&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending: "}),e.jsx("span",{className:"font-medium text-accent-600 dark:text-accent-400",children:a.pendingDays})]})]})]}),e.jsx("div",{className:"mt-3 w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-primary-500 h-2 rounded-full",style:{width:`${a.usedDays/a.totalDays*100}%`}})})]},a.id)):e.jsx("div",{className:"col-span-full text-center py-6 text-gray-500 dark:text-gray-400",children:"No leave balances found"})})]})]})};export{X as default};
